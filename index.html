<script>
  // ðŸ”¥ ConfiguraÈ›ia Firebase â€“ foloseÈ™te UN singur proiect
  const firebaseConfig = {
    apiKey: "AIzaSyDL7CpWuxJOVjQPFMY0CmTT32YnmI8ze2A",
    authDomain: "mester-manole-job.firebaseapp.com",
    databaseURL: "https://mester-manole-job-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "mester-manole-job",
    storageBucket: "mester-manole-job.appspot.com",
    messagingSenderId: "470418949962",
    appId: "1:470418949962:web:b4f8df67587837aba7e3b3"
  };

  // Initialize Firebase (compatibil cu HTML simplu)
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();
  const servicesRef = database.ref('services');

  // AÈ™teaptÄƒ ca DOM-ul sÄƒ fie gata
  document.addEventListener('DOMContentLoaded', () => {
    const servicesList = document.getElementById('servicesList');
    const servicesCount = document.getElementById('servicesCount');
    const form = document.getElementById('serviceForm');

    if (!servicesList || !servicesCount || !form) {
      console.error("Elemente lipsÄƒ Ã®n HTML!");
      return;
    }

    // FuncÈ›ie de afiÈ™are servicii
    function renderServices(servicesArray) {
      servicesCount.textContent = `${servicesArray.length} servici${servicesArray.length === 1 ? 'u' : 'i'}`;
      
      if (servicesArray.length === 0) {
        servicesList.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-user"></i>
            <h3>Nu existÄƒ servicii Ã®ncÄƒ</h3>
            <p>Fii primul care Ã®È™i oferÄƒ serviciile!</p>
          </div>
        `;
        return;
      }

      servicesArray.sort((a, b) => b.timestamp - a.timestamp);
      servicesList.innerHTML = '';
      
      servicesArray.forEach(service => {
        const date = new Date(service.timestamp).toLocaleDateString('ro-RO', {
          day: 'numeric',
          month: 'short',
          hour: '2-digit',
          minute: '2-digit'
        });

        const categoryClass = {
          'Development': 'category-dev',
          'Design': 'category-design',
          'Marketing': 'category-marketing',
          'Writing & Translation': 'category-writing',
          'Consulting': 'category-consulting',
          'Video & Audio': 'category-video',
          'Admin Support': 'category-admin',
          'Other': 'category-other'
        }[service.category] || 'category-other';

        const availabilityClass = {
          'Full-time': 'availability-ft',
          'Part-time': 'availability-pt',
          'Project-based': 'availability-project',
          'Hourly': 'availability-hourly'
        }[service.availability] || 'availability-hourly';

        const serviceEl = document.createElement('div');
        serviceEl.className = 'service-card';
        serviceEl.innerHTML = `
          <div class="service-header">
            <span class="tag ${categoryClass}">${service.category}</span>
            <span class="tag ${availabilityClass}">${service.availability}</span>
          </div>
          <h3 class="service-title">${service.title}</h3>
          <p class="service-desc">${service.description}</p>
          <div class="service-footer">
            <div><i class="fas fa-envelope"></i> ${service.contact}</div>
            <div><i class="fas fa-clock"></i> ${date}</div>
          </div>
        `;
        servicesList.appendChild(serviceEl);
      });
    }

    // ÃŽncarcÄƒ datele din Firebase
    servicesRef.on('value', (snapshot) => {
      const data = snapshot.val();
      const servicesArray = data ? Object.values(data) : [];
      renderServices(servicesArray);
    });

    // Trimite formularul
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const newService = {
        title: document.getElementById('title').value.trim(),
        category: document.getElementById('category').value,
        availability: document.getElementById('availability').value,
        description: document.getElementById('description').value.trim(),
        contact: document.getElementById('contact').value.trim(),
        timestamp: firebase.database.ServerValue.TIMESTAMP
      };
      if (newService.title && newService.description && newService.contact) {
        servicesRef.push(newService);
        form.reset();
      }
    });
  });
</script>
